#!/bin/bash

# Function to convert from custom base to decimal
custom_to_decimal() {
    local number=$1
    local base_chars=$2
    local base=${#base_chars}
    local decimal=0
    local power=0
    
    # Process from right to left
    for ((i=${#number}-1; i>=0; i--)); do
        char=${number:$i:1}
        # Find position of character in base
        pos=0
        for ((j=0; j<${#base_chars}; j++)); do
            if [[ ${base_chars:$j:1} == $char ]]; then
                pos=$j
                break
            fi
        done
        decimal=$((decimal + pos * (base ** power)))
        power=$((power + 1))
    done
    
    echo $decimal
}

# Function to convert from decimal to custom base
decimal_to_custom() {
    local decimal=$1
    local base_chars=$2
    local base=${#base_chars}
    local result=""
    
    if [[ $decimal -eq 0 ]]; then
        echo ${base_chars:0:1}
        return
    fi
    
    while [[ $decimal -gt 0 ]]; do
        remainder=$((decimal % base))
        result=${base_chars:$remainder:1}$result
        decimal=$((decimal / base))
    done
    
    echo $result
}

# Base definitions
water_base="water"
stir_base="stir."
bestchol_base="bestchol"

# Convert WATER from base "water" to decimal
water_decimal=$(custom_to_decimal "$WATER" "$water_base")

# Convert STIR from base "stir." to decimal
stir_decimal=$(custom_to_decimal "$STIR" "$stir_base")

# Add the two decimal numbers
sum=$((water_decimal + stir_decimal))

# Convert sum to base "bestchol"
result=$(decimal_to_custom "$sum" "$bestchol_base")

echo $result
