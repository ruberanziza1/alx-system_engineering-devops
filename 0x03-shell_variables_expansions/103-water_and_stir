#!/bin/bash

# Convert from custom base to decimal
from_base() {
    local num=$1
    local base=$2
    local result=0
    local base_len=${#base}
    
    for ((i=0; i<${#num}; i++)); do
        char=${num:$i:1}
        # Find position of char in base
        for ((j=0; j<base_len; j++)); do
            if [[ ${base:$j:1} == $char ]]; then
                result=$((result * base_len + j))
                break
            fi
        done
    done
    echo $result
}

# Convert from decimal to custom base
to_base() {
    local num=$1
    local base=$2
    local base_len=${#base}
    local result=""
    
    if [[ $num -eq 0 ]]; then
        echo ${base:0:1}
        return
    fi
    
    while [[ $num -gt 0 ]]; do
        result=${base:$((num % base_len)):1}$result
        num=$((num / base_len))
    done
    echo $result
}

# Convert WATER from base5 (water) to decimal
water_dec=$(from_base "$WATER" "water")

# Convert STIR from base5 (stir.) to decimal  
stir_dec=$(from_base "$STIR" "stir.")

# Add them
sum=$((water_dec + stir_dec))

# Convert to base8 (bestchol)
result=$(to_base $sum "bestchol")

echo $result
